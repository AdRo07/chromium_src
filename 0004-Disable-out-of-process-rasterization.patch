From ebd2f01f22e5657829226ce6c1f9892079243a79 Mon Sep 17 00:00:00 2001
From: Robert Yang <decatf@gmail.com>
Date: Thu, 6 Dec 2018 15:43:00 -0500
Subject: [PATCH 4/4] Disable out of process rasterization

---
 content/browser/android/content_startup_flags.cc |  2 ++
 gpu/config/software_rendering_list.json          | 11 +++++++++++
 2 files changed, 13 insertions(+)

diff --git a/content/browser/android/content_startup_flags.cc b/content/browser/android/content_startup_flags.cc
index f009fbe515b..b2139145898 100644
--- a/content/browser/android/content_startup_flags.cc
+++ b/content/browser/android/content_startup_flags.cc
@@ -61,6 +61,8 @@ void SetContentCommandLineFlags(bool single_process) {
 
   // Fix video rendering for Tegra 2
   parsed_command_line->AppendSwitch(switches::kEnableThreadedTextureMailboxes);
+
+  parsed_command_line->AppendSwitch(switches::kDisableOopRasterization);
 }
 
 }  // namespace content
diff --git a/gpu/config/software_rendering_list.json b/gpu/config/software_rendering_list.json
index cb6118b6a4e..c98886c35c6 100644
--- a/gpu/config/software_rendering_list.json
+++ b/gpu/config/software_rendering_list.json
@@ -1681,6 +1681,17 @@
         "accelerated_webgl",
         "accelerated_webgl2"
       ]
+    },
+    {
+      "id":158,
+      "description": "Out of process rasterization broken on Nvidia",
+      "os": {
+        "type": "android"
+      },
+      "gl_renderer": "NVIDIA.*",
+      "features": [
+        "oop_rasterization"
+      ]
     }
   ]
 }
-- 
2.17.1

